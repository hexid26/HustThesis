% TODO

% [ ] 语句通畅度修改
% [ ] 公式是否增加推导过程
% [ ] D2D 通信增加几篇文献并做简要说明

\chapter{面向群智感知质量优化的边缘资源调度}

如今，人类社会已经进入万物互联时代。
无处不在的移动设备让移动群智感知的覆盖区域更开阔、采集任务更丰富、数据收集更全面。
为了实现高效率、大覆盖的移动群智感知应用，边缘计算已经替代云计算为移动群智感知提供基础支撑。
通过在边缘服务器上部署相关服务，可以增加群智感知应用的执行效率。
% 利用边缘服务器分发感知任务，可以大大提高感知任务的空间覆盖率。
同时，在移动设备之间使用D2D通信技术，不仅能减少主干网络的流量负载，还能减少感知数据的传输时延。
% 尽管大量的研究工作利用模拟或系统实验证明了边缘计算和D2D通信对移动群智感知的积极作用，但是这些研究工作并没有考虑移动设备自身的运动特征对移动群智感知造成的影响。
考虑到边缘服务的部署与群智感知应用执行效率的关系，以及移动设备运动状态对 D2D 通信造成的影响，本章将移动群智感知的场景进行参数量化，并结合移动设备的运动特征，针对移动群智感知的执行过程建立分析模型。
然后利用随机过程分析方法，讨论了移动群智感知执行过程中各参数对感知质量的影响机理以及优化途径。
最后根据分析结果，提出了面向感知质量优化的边缘调度方法。

\section{引言}

当使用云计算支撑移动应用时，如文献~\cite{DBLP:journals/fgcs/AntonicMPZ16,DBLP:conf/ccnc/MessaoudRG16}中所讨论，所有的感知数据都会被上传到云端，这种做法随着移动设备和上传数据的增加，会急剧消耗主干网络的带宽资源。
边缘计算的提出，将云端服务迁移到位于网络边缘侧的边缘服务器（例如蜂窝网络中的基站或者大型无线网络接入点）上，使计算资源、存储资源、应用服务更加贴近数据产生源。
由于边缘网络中移动设备多、地域分布广，研究者们普遍认为边缘计算可以显著提升网络应用的服务质量~\cite{DBLP:conf/sigcomm/BonomiMZA12}。
近年来，学术界和工业界都在不断挖掘边缘计算的巨大潜力，致力于将边缘计算应用到不同领域的开创性工作中~\cite{DBLP:journals/access/MarjanovicAZ18,DBLP:journals/iotj/ChiangZ16}。


% 目前，移动计算领域与边缘计算日益紧密的结合在一起。
鉴于边缘计算的分布式特性以及可利用资源更靠近数据源，移动计算应用可以利用边缘计算实现高带宽、低延时的实时服务。
移动群智感知作为移动计算领域中的一种典型应用，利用无线网络和移动设备中内置的传感器来完成对真实世界的数字感知工作。
不同于传统的专用型无线传感器网络，移动群智感知可以更方便快捷地收集与人类生活、自然环境息息相关的各种数字信息~\cite{DBLP:journals/cm/GuoCZYC16}。
利用边缘计算支撑的移动群智感知应用，已经广泛应用于其它不同领域，例如无线网络性能测量~\cite{DBLP:journals/cm/RosenLLCMB14}、天气预报~\cite{DBLP:journals/tpds/ZhaoMTL15}、空气质量监测~\cite{DBLP:conf/huc/ZhangXWC14}、城市噪声监测~\cite{DBLP:conf/huc/ZhengLWZLC14}和城市智能交通建设~\cite{DBLP:conf/icdcs/ZhouJL15}等。

除了边缘计算能够帮助移动群智感知提高感知质量，研究者还发现使用成本更低的D2D通信，也可以达到这一目的~\cite{DBLP:journals/puc/WangLL17}。
利用移动设备之间的D2D通信，使得不具备蜂窝网络通信能力的移动设备也能够快速加入群智感知，例如可穿戴设备，监控设备等。
同时，在使用成本方面，D2D通信的能耗成本更低且不需要服务成本，因此更适合应对群智感知中的海量数据交换。
另一方面，在 D2D 通信构建的机会式网络和主干网络相互隔离，在机会式通信网络中对感知数据进行收集、去冗、压缩，也可以有效缓解海量感知数据对主干网络的资源占用。
除此之外，D2D通信作为5G网络中的重要的通信手段，将在物联网场景下成为核心通信手段之一。

% 边缘计算支撑移动群智感知应用，
% 由于产生感知数据的移动设备（例如智能手机、智能手表）和位于数据中心的云端服务相距甚远，感知数据在传输过程中会遇到较高的网络延时或者不可预测的网络抖动，导致传输延时增加。
% 另一方面，将海量的感知数据汇总到云平台，会消耗主干网中大量的带宽资源。
% 通过边缘计算的支援，移动群智感知应用可以依靠边缘服务器中的可利用资源，辅助任务转发和数据收集工作，扩大移动群智感知应用的适用范围，降低感知成本，提高感知质量。
% 另一方面，介于蜂窝通信的成本较高，减退了许多潜在移动群智感知参与者的热情。
% 为了解决这一问题，许多研究人员设计了激励机制来吸引更多的群智感知参与者，也有部分研究人员发现利用成本更低的D2D通信，同样可以缓解这一问题~\cite{DBLP:journals/puc/WangLL17}。

\begin{figure}[!b]
  \centering
  \vspace{-1em}
  \includegraphics[width=220pt]{./figures/Sec_UIC/移动群智感知应用场景.pdf}
  \vspace{-0.5em}
  \caption{边缘计算支撑下的移动群智感知应用场景}
  \vspace{-1em}
  \label{Figure_UIC_MCS}
\end{figure}

基于上述原因，本章的研究工作针对图~\ref{Figure_UIC_MCS} 所描述的边缘计算支撑下的移动群智感知应用场景。
首先，目标区域内的基站从云端服务器获取感知任务，利用蜂窝网络和 D2D 通信的方式，将感知任务分发给区域内的移动设备。
其次，接收到感知任务的移动设备，在执行任务的同时，借助 D2D 通信将感知任务分发给相邻的移动设备。
待感知任务执行完毕，参与感知任务的移动设备利用蜂窝网络或者 D2D 通信，再将感知数据反馈给基站。
最后，基站对收集到的感知数据执行去冗、合并、压缩等操作后，再交付给云端服务器执行最终的运算处理。

% 在本文中，我们提出边缘计算授权MCS与D2D通信，其中整个MCS过程有两个主要阶段。在第一阶段（任务分发）中，边缘节点作为源节点执行以将任务分发到移动设备。在第二阶段（数据收集）中，移动设备成为源节点，边缘节点成为目标节点。任务和传感数据都以机会方式通过D2D通信传输。在这种情况下，第一个自然问题是服务部署如何影响感知质量（例如，覆盖）。直观地知道通过部署相应的服务来利用更多的边缘节点，将实现更高的传感质量。但是，在边缘节点中部署服务并不是免费的。因此，量化这种对服务部署决策的影响是非常重要的。现有的研究，例如[13]  -  [15]，已经分析了D2D机会网络中的消息传递延迟。这些研究表明，消息传递性能受很多因素的影响很大，例如移动设备的数量和移动设备的遭遇率。正如我们注意到的，他们通常假设有一个数据源节点和一个目标节点。它们都不能用于分析边缘计算授权MCS的性能，因为可能有多个边缘节点分别在任务分发阶段和数据收集阶段中作为源节点和目的节点执行。

在该场景下，重点考虑边缘网络中感知任务的分发效率和感知数据的收集效率，以提高移动群智感知应用的覆盖范围和感知质量。
在任务分发过程中，已部署任务分发服务的基站作为任务分发的源头，不断地将移动群智感知任务分发至移动设备。
在数据收集过程中，移动设备作为感知数据的源头，将数据回传至已经部署数据收集服务的基站。
任务的传播和感知数据的转发不仅可以通过蜂窝数据进行发送，也可以通过D2D通信的方式传输。
现有研究~\cite{DBLP:conf/wcnc/QinF13,DBLP:journals/twc/LiW14,DBLP:journals/winet/ZhaoMLT18}已经分析了D2D机会式通信网络中的信息传递延时。
这些研究工作表明，D2D通信机制中消息传递延时的影响因素主要有移动设备的数量和移动设备的相遇率。
然而，这些研究工作在边缘网络中只选取了一个边缘服务器同时作为数据分发源和数据收集目的地。
在真实场景下，可以存在多个源节点和目标节点。
因此，这些研究工作并不适用于分析边缘计算下的移动群智感知过程。
为了提高移动群智感知的感知质量，必须用新的方法量化边缘网络中服务资源部署对移动群智感知的影响。
在该述求下，第一个挑战就是探索边缘网络中的资源部署对移动群智感知应用覆盖范围和服务质量的影响机理。
% 另外，移动群智感知应用中的设备随着时间的推移会改变自身的位置。
第二个挑战是探索移动设备的运动模型对移动群智感知应用服务质量的影响。

为了解决这两个问题，本章在边缘计算下的移动群智感知中结合D2D通信，并对数据传输过程进行理论分析、性能分析。本章的主要贡献如下：

1）利用常微分方程组，描述边缘计算环境下的移动群智感知中的任务分发阶段和数据收集阶段。
通过对常微分方程组进行分析和求解，量化移动群智感知应用场景中的边缘服务以及感知设备的移动模型，并推导出量化参数和感知质量之间的关系。


2）基于移动群智感知应用的生命周期，本章设计了一种时间划分算法，以找出任务分发阶段和数据收集阶段的最佳时间分配，帮助移动群智感知应用获得更好的感知质量。

% 3）经过模拟实验分析，验证了模型和算法的正确性和准确性。

\section{移动群智感知过程分析}

% 本章中，我们重点研究了与论文[22]中描述的MCS过程。 在第一个任务分发阶段，任务分发者将MCS任务分发到移动设备。 此后，在第二数据收集阶段，已经接收到任务的移动设备进行感测并将感测数据报告回数据收集器。 我们进一步使雾计算参与上述程序。 在本节中，我们首先介绍一些预备，然后定义随机过程分析的系统模型。

本章采用了和文献~\cite{DBLP:journals/tpds/ZhaoMTL15}相似的移动群智感知应用范式，主要研究对象为移动群智感知应用中的两个重要过程：任务分发过程和数据收集过程。
其中，任务分发过程是指已部署任务分发服务的基站将任务分发至边缘网络中的移动设备，数据收集过程是指已经接受到任务的移动设备将感知数据反馈给已部署数据收集服务的基站。
考虑到移动群智感知参与者本身具备移动性，本章也将移动设备的运动特征纳入考虑范围。
本小节重点介绍分析模型中的参数定义和模型建立。

\subsection{场景定义}

% 当结合雾计算时，任务分发者和数据收集器都被部署为雾节点中的服务。在不失一般性的情况下，我们假设基站是本文中的雾节点。图2描述了具有D2D通信的雾计算授权MCS的工作过程。首先，MCS服务提供商选择适当的基站来部署MCS服务。其次，在任务分发阶段，这些基站开始向移动设备传播MCS任务。为了避免蜂窝通信成本，基站仅将任务传递到进入其通信范围的移动设备。然后，已经完成任务的移动设备开始将任务转发到在其移动期间通过D2D通信遇到的其他移动设备。传播的时间消耗是T传播。在时间段T感测中，移动设备获得感测数据并将它们发送回数据收集器。设T集合表示数据收集的时间消耗。在整个阶段，我们假设所有移动设备都是MCS服务的志愿者。请注意，具有该任务的任何移动设备都可以帮助传播任务并通过D2D通信收集传感数据。显然，这形成了与流行病学路由的机会网络。

在边缘计算场景下，移动群智感知中的任务分发服务和数据收集服务都可以部署在边缘服务器中。
在不失普适性的情况下，本章假设蜂窝网络的基站作为能够承载这些服务的边缘服务器。
此时移动群智感知应用的执行过程大体分为四步：
1）选择合适的基站部署任务分发服务和数据收集服务；
2）在任务分发阶段，部署有任务分发服务的基站利用蜂窝网络和D2D通信将感知任务发送到附近的移动设备上；
3）移动设备在收到感知任务之后，一边处理感知任务，一边利用D2D通信将任务广播给附近的其它移动设备；
4）已经完成任务的移动设备，可以利用蜂窝网络或者D2D通信，将感知数据反馈给已经部署数据收集服务的基站。
由于本章的重心并不是激励移动设备收集数据，所以在整个移动群智感知应用执行期间，本章假设所有的移动设备都是移动群智感知应用的志愿者。

\begin{figure}[!h]
  \centering
  \vspace{-1em}
  \includegraphics[width=240pt]{./figures/Sec_UIC/移动群智感知应用的时间分布.pdf}
  \vspace{-0.5em}
  \caption{移动群智感知应用的时间分布}
  \vspace{-1em}
  \label{Figure_MCS_Delay}
\end{figure}

图~\ref{Figure_MCS_Delay} 描述了边缘计算环境中，移动群智感知应用中各阶段的时间开销。
在基站中部署好任务分发服务和数据收集服务之后，
$T_{dissemination}$ 表示移动群智感知任务从基站发送到移动设备的时间开销；
$T_{sensing}$ 表示移动设备执行感知任务的时间开销；
$T_{collection}$ 表示移动设备将感知数据反馈回基站的时间开销；
$T_{total\_time}$ 是前三者之和。

% 图3总结了雾计算授权MCS与D2D通信的任务分发的两种主要通信模式。 一旦移动设备完成任务，除了传播任务外，它还进行协作和机会感知以在移动期间获取感测数据。 然后，在数据收集阶段，移动设备开始将其感测数据发送回数据收集器，即，利用MCS服务部署的雾节点。 与任务分发阶段类似，传感数据可以直接传输到基站或通过基于D2D的流行路由到达基站，如图4所示。

图~\ref{Figure_PropagationProcedure} 展示了边缘网络中感知任务的分发方法。
首先，部署有任务分发服务的基站利用蜂窝网络以固定的速率将任务部署到可通信的移动设备上。
已经被部署感知任务的移动节点，在感知任务生命周期内，利用 D2D 通信将感知任务分发给其相邻且未收到感知任务的移动设备。
由于 D2D 通信需要两个移动设备的距离满足一定条件，因此使用 D2D 通信传播感知任务会受到移动设备运动状态的影响。

\begin{figure}[!h]
  \centering
  % \vspace{-1em}
  \includegraphics[width=280pt]{./figures/Sec_UIC/任务分发过程.pdf}
  \vspace{-0.5em}
  \caption{感知任务分发过程}
  \vspace{-1em}
  \label{Figure_PropagationProcedure}
\end{figure}

图~\ref{Figure_FeedbacksCollection} 展示了边缘网络中感知数据的收集方法。
利用 D2D 通信，相邻的两个移动设备可以交换自己的感知数据。
通过连续的数据交换操作，远端移动设备的感知数据有机会传送到负责收集数据的基站。
另一方面，部署有数据收集服务的基站也可以利用蜂窝通信网络，直接选取可通信的移动设备，获取该设备上的感知数据。
同时，与基站通信的移动设备，可能和其它移动设备已经交换过感知数据，因此基站在一个移动设备上可以收集到来自不同设备的感知数据。

% 计算下的移动群智感知服务利用蜂窝网络和D2D通信完成任务分发。
% 已经收到任务的移动设备，在其移动过程中，会有一定的概率遇到没有接收到任务的移动设备。
% 此时，已经收到任务的设备利用D2D通信，将任务分发至还没有收到任务的设备。
% 待任务执行完成后，移动设备可以利用蜂窝网络将感知数据传送给基站，也可以利用D2D通信将结果委托给在移动过程中相遇的其它设备，并传送给基站。
% 这一过程，如图~\ref{Figure_FeedbacksCollection} 所示。

\begin{figure}[!h]
  \centering
  % \vspace{-1em}
  \includegraphics[width=350pt]{./figures/Sec_UIC/数据收集过程.pdf}
  \vspace{-0.5em}
  \caption{感知数据收集过程}
  \vspace{-1.5em}
  \label{Figure_FeedbacksCollection}
\end{figure}

\subsection{移动模型}
% 按照上述工作流程，在本文中，我们认为在MCS服务中部署了N f个雾节点。它们既可以作为任务分发者，也可以作为数据收集者。在雾中，有N个移动设备随机移动并且可以自愿参与MCS过程。由于移动，移动设备可以机会性地与另一个移动设备相遇并且在接触持续时间期间与遇到的移动设备通信。我们假设接触持续时间足够长以完成任务或传感数据的传输。

在场景定义中，参与移动群智感知的移动设备主要有两类：负责感知任务分发和数据收集的基站，以及执行感知任务的移动设备。
对于基站而言，一般为固定式部署，不存在移动特性。
但是对于移动设备而言，每个移动设备都有自己的运动轨迹，这些设备遵循自身的轨迹移动而相遇，利用 D2D 通信进行数据交互。
为了抽象描述移动设备在运动过程产生的 D2D 通信行为，本章将其转化为移动设备之间的相遇率来表示。
在此，本节定义 $\lambda_n$ 和 $\lambda_f$，分别表示移动设备之间的相遇率和基站与移动设备之间的相遇率。

在此，用 $\lambda_n$ 表示任意移动设备之间的相遇概率。
Groenevelt 等人~\cite{DBLP:journals/pe/GroeneveltNK05}的研究中，给出了机会式通信网络中相遇率的计算方法。
借助该理论， $\lambda_n$ 可以采用式~\eqref{Formula_EncounterRate} 进行计算得出。
其中，$d$ 表示移动设备 D2D 通信的最远距离（单位：米），
$\mathbb{E}[V^*]$ 指的是特定区域内所有移动设备的平均速度（单位：米/秒），
$A$ 表示 D2D 通信网络中所期望的覆盖区域面积（单位：平方米），
$w$ 表示移动设备的运动模型对应的常量系数，例如随机路径运动模型所对应的系数为 1.3683。
基于这一理论，可以将群智感知的覆盖范围、以及移动设备的运动轨迹转化为移动设备的相遇概率。

\begin{equation}
  \label{Formula_EncounterRate}
  \begin{gathered}
  \lambda = \frac{2 w d \mathbb{E}[V^*]}{A}
  \end{gathered}
  % \vspace{-0.5em}
\end{equation}

除此之外，基站也会以一定的速率将感知任务发送至移动设备，或者从移动设备收集感知数据。
将基站和移动设备因感知任务而交互的速率定义为基站和移动设备之间的相遇率 $\lambda_f$。
由于基站和移动设备使用蜂窝网络进行数据通信，所以 $\lambda_f$ 和移动设备的运动轨迹没有直接联系。
所以，$\lambda_f$ 也可以理解为基站和移动设备因群智感知发生通信的概率。

% 本章将边缘网络中的移动设备分为两类：一类是『部署有任务分发服务和数据收集服务的边缘服务器』；另一类是『执行移动群智感知任务的移动设备』。
% 其中，边缘服务器上同时部署任务分发服务和数据收集服务。
% 本章中，边缘服务器的数量用 $N_f$ 表示。
% 在移动群智感知应用的目标覆盖区域内，移动设备的数量记为 $N$，且这些设备都可认为是移动群智感知服务中的志愿者。
% 由于移动设备在移动的过程中，会与其它移动设备相遇，利用相遇的过程，可以利用D2D通信完成任务分发和数据转发。
% 这里假设在移动设备的接触时间内数据交换工作能够顺利完成。


% 由于边缘终端的移动特性，每个移动设备都有一定的概率遇到相邻设备并进行D2D数据交互。
% 此处用 $\lambda_f$ 表示边缘服务器和移动设备之间的相遇概率；用 $\lambda_n$ 表示任意移动设备之间的相遇概率。
% 在边缘网络中，移动设备的相遇过程可以利用不同的移动模型进行推导。
% 在 Groenevelt 等人的论文~\cite{DBLP:journals/pe/GroeneveltNK05}中，随机路径移动模型中的相遇概率可以用式~\ref{Formula_EncounterRate} 进行计算。
% 其中，$d$ 是设备的通信距离，
% $\mathbb{E}[V^*]$ 指的是特定区域内所有节点的平均速度，
% $A$ 表示所有节点通信半径覆盖的区域面积，
% $w$ 是常数，其近似值为 1.3683。



% 由于大多数MCS应用程序都是有时间限制的，因此我们将图2中的T总时间视为截止日期。 T传播，T传感和T收集代表任务分发，数据传感和数据收集的时间。 实际上，数据生成过程非常快，因为数据生成器通过读取内置传感器来获取这些数据。 因此，我们忽略了T感知，并关注这项工作流程中的其他两个阶段：任务分发阶段和数据收集阶段。

% 鉴于移动群智感知应用的时效性，图~\ref{Figure_MCS_Delay} 中的 $T_{total\_time}$ 可以被认为是移动群智感知服务的生命周期。
% 同时，$T_{dissemination}$ 代表了任务分发的周期；
% $T_{sensing}$ 代表了数据感知的周期；
% $T_{collection}$ 代表了数据收集的周期。
% 相较于任务分发周期和数据收集周期，数据感知的时间周期非常小，所以重点考虑任务分发周期和数据收集周期，对于数据感知周期则忽略不计。

\section{随机过程分析模型及优化}
% 在本节中，我们给出了任务传播阶段，数据收集阶段的随机过程分析，以及在给定参数（如N，N f，λn，λ）的覆盖度量中可实现的感知质量的推导。 F 。 为方便读者，表I总结了本文中使用的主要符号。
本小节主要阐述任务分发过程和数据收集过程的理论分析方法。
表 ~\ref{table_notations_UIC} 给出了本章中使用的符号定义。

\begin{table}[h]
  \vspace{-1.5em}
  \caption{数学符号及定义}
  \vspace{-0.5em}
  \centering
  \label{table_notations_UIC}
  % \centering
  \begin{tabular}{|c|p{7cm}|}
  \hline
  \textbf{符号} & \textbf{定义}\\
  \hline
  $N$ & 移动设备的数量\\\hline
  $N_f$ & 基站的数量\\\hline
  $\lambda_n$ & 移动设备之间的相遇概率\\\hline
  $\lambda_f$ & 基站和移动设备的相遇概率\\\hline
  $I(t)$ & $t$ 时刻已经收到任务的移动设备的数量\\\hline
  $I'(t)$ & $t$ 时刻 $I(t)$ 的增量\\\hline
  $P_{rcv}(t)$ & $t$ 时刻基站收到感知数据的概率\\\hline
  \end{tabular}
  \vspace{-1em}
\end{table}

\subsection{任务分发过程分析}

在任务分发过程中，当移动设备从基站收到任务之后，在其移动过程中利用D2D通信对移动群智感知任务进行二次分发。
这种基于D2D的任务分发过程和人群中传染病的扩散原理类似。
因此可以借助 SIR（Susceptible Infective Removal）模型来描述移动设备之间的任务分发过程。
但是和传统 SIR 模型不同的是，基站可以利用蜂窝网络直接将任务分发至移动设备。
因此任务的分发速度也和基站的数量 $N_f$ 、以及基站与移动设备的相遇率 $\lambda_f$ 相关。
借助 SIR 模型，将 $I(t)$ 作为已经收到任务的移动设备的数量。
由于这些设备会以 D2D 通信的方式分发感知任务，其大小也会影响任务分发的速度。
将这两种任务分发的途径结合考虑，任务分发的速率 $I'(t)$ （$I(t)$ 的导数）如式~\eqref{Formula_SIR_with_fog} 所示。

\begin{equation}
  \label{Formula_SIR_with_fog}
  \begin{aligned}
    I'(t) &= N_f \lambda_f (N-I(t)) + I(t) \lambda_n (N-I(t)) \\
    &= N_f \lambda_f N + ( N \lambda_n - N_f \lambda_f) I(t) - \lambda_n I^2(t) 
  \end{aligned}
\end{equation}

上式是黎卡提（Riccati）常微分方程形式。
考虑到初始条件 $I(0)=0$，即在移动群智感知开始时刻（$t=0$）没有移动设备收到感知任务，则时刻$t$已接收感知任务的移动设备数量可由式~\eqref{Formula_It_with_fog} 表示。

% \vspace{-1em}
\begin{equation}
\label{Formula_It_with_fog}
\begin{aligned}
I(t) = \frac{N (e^{(\lambda_n N + \lambda_f N_f) t} - 1)}{e^{(\lambda_n N + \lambda_f N_f) t} + \frac{\lambda_n N}{\lambda_f N_f}}, \forall\ \lambda_n \in [0, 1),\ \lambda_f \cdot N_f \in [0, 1)
\end{aligned}
\end{equation}

% 每当移动设备直接从雾节点或间接从其他移动设备接收任务时，它开始进行感测操作并将感测数据存储到其本地缓冲器中。 为了理解参与MCS的移动设备的比例，我们将受感染的移动设备的数量相对于移动设备的总数标准化为Eq。（4）。 当C T（t）= 100％时，表示所有移动设备已经接收到任务并参与了MCS。

当移动设备接收到移动群智感知任务之后，根据任务内容执行感知操作并将感知数据存储在本地缓存中，然后等待机会将数据传送回边缘服务器。
为了真实了解参与到移动群智感知任务的移动设备数量，式~\eqref{Formula_Coverage_of_Task} 中的 $C_T(t)$ 表示所有移动设备中已经收到移动群智感知任务的设备数量。
当 $C_T(t)=1$ 时，表示区域内所有的移动设备都参与了移动群智感知服务。

\begin{equation}
  \label{Formula_Coverage_of_Task}
  C_T(t) = \frac{I(t)}{N} = \frac{e^{(\lambda_n N + \lambda_f N_f) t} - 1}{e^{(\lambda_n N + \lambda_f N_f) t} + \frac{\lambda_n N}{\lambda_f N_f}}
\end{equation}

\subsection{数据收集过程分析}

% 在任务传播阶段之后，移动设备开始将感测数据返回到数据收集阶段中的雾节点。 因为许多MCS应用程序都有截止日期来接收移动设备生成的数据。 对于MCSusers，雾节点接收的数据越多，覆盖范围越大。 因此，了解雾节点在特定时间点接收到多少数据是很重要的。
已经收到任务的移动设备按照要求获取感知数据后，需要及时地将感知数据传送回边缘服务器。
而移动群智感知应用在其生命周期内，收集到的数据越多，数据覆盖范围越大，则移动群智感知服务能够达到的服务质量就越高。
这也意味着在规定的时间范围内，边缘服务器必须尽可能收集来自所有移动设备上的感知数据。
因此，在时域上分析数据收集过程也是非常重要的工作。

% 众所周知，传感数据也通过流行路由路由回到雾节点。 在此阶段，参与MCS的移动设备是源节点，任何雾节点都可以是目标节点。 移动设备上的感测数据被打包到一个分组中，该分组可以在一对移动设备之间或移动设备和雾节点之间的一个接触中被传送。 感测数据独立地路由而不与雾节点冲突。 Whenevera雾节点接收到数据包，我们说传感数据已成功接收。 我们首先分析一个雾节点在timet接收到apacket的概率。 请注意，雾节点可以直接或间接接收数据包，两种方法都是独立的。 因此，雾时钟点接收的数据包的概率Prcv（t）可以计算为

和任务分发时数据流的途径一样，感知数据在收集过程中，移动设备也可以使用蜂窝网络或者D2D通信的方式将发送感知数据。
在这一过程中，任何边缘服务器都可以作为感知数据的目的地。
在使用D2D通信时，移动设备可以相互交换感知数据，并将收到的感知数据进行打包处理并未下一次转发做好准备。
一个感知数据包一旦到达任何一个边缘服务器，则该组感知数据被认为已经收集完成。
在时刻 $t$，一个数据包被边缘服务器收到的概率记为 $P_{rcv}(t)$。
在边缘网络中，数据包可以利用蜂窝网络或者D2D通信传输，而这两种传播方式都是相互独立的。
因此，$P_{rcv}(t)$ 的计算方法如式~\eqref{Formula_ProbaRcvT}。

\begin{equation}
\label{Formula_ProbaRcvT}
\begin{aligned}
P_{rcv}(t) = 1 - P_{nD2D}(t) P_{nDirect}(t)
\end{aligned}
\end{equation}

上式中，$P_{nD2D}(t)$ 指的是数据包以D2D通信未送达的概率，计算方法如式~\eqref{Formula_ProbaNP}；
$P_{nDirect}(t)$ 指的是数据包以蜂窝网络通信未送达的概率，计算方法如式~\eqref{Formula_ProbaNA}。
其中，$P_{nD2D}(t)$ 和 $P_{nDirect}(t)$ 都可以利用式~\eqref{Formula_SIR_with_fog} 推导得出。


\begin{equation}
  \label{Formula_ProbaNP}
  \begin{aligned}
  P_{nD2D}(t) = (\frac{N-S(t)}{N})^{\lambda_f N_f t}, \forall \ \lambda_f N_f \in [0,1)
  \end{aligned}
\end{equation}

\begin{equation}
  \label{Formula_ProbaNA}
  \begin{aligned}
  P_{nDirect}(t) = (\frac{N}{N + N_f})^{S(t)-1}
  \end{aligned}
\end{equation}

在上式中，$S(t)$ 表示一组感知数据包在传输交换之后，网络中该数据包的拷贝总数。
其计算方法如式~\eqref{Formula_St}。

\begin{equation}
\label{Formula_St}
  \begin{aligned}
    S(t) = \frac{N e^{\lambda_n N t}}{e^{\lambda_n N t} + N -1}, \forall \ \lambda_n \in [0,1)
  \end{aligned}
\end{equation}

\subsection{感知覆盖范围分析}

% 在MCS应用程序中，任务需要覆盖广泛的领域。该区域的覆盖范围意味着感应地图的感应质量。例如，十字路口的交通状况可以通过附近所有道路上的车辆数量来确定。为了准确计算覆盖率，我们将网络区域切割成一组网格单元= fg1G2；G3；: : : : :；gmg，如图5所示。这些单元的大小意味着空间上的感知粒度，这由MCS应用程序用户决定。假设地图中有移动参与者，letLij(t )表示网格中的移动参与者是否在某个时间( I )，即..
移动群智感知的应用，往往需要覆盖防范的地域范围。
其传感数据所涵盖的地域范围越广，则移动群智感知服务的普适性越强。
例如，一个十字路口的交通状况需要通过附近所有道路上的车辆数量来推理。
为了准确计算移动群智感知应用的覆盖率，移动群智感知应用的目标区域如图~\ref{Figure_CoverageofArea} 被切割成一组网格单元：$G = \{g_1,g_2,g_3,\ldots,g_m\}$。
网格单元的大小意味着地域空间上的感知密度，该参数由移动群智感知应用的开发者所决定。
在分析传感质量是，这里用 $L_{ij}(t)$ 表示在时刻 $t$ 时，移动设备 $j$ 是否在网格$g(i)$中。
其定义如式~\eqref{Formula_LocationIJ} 表示。

\begin{figure}[!h]
  \centering
  % \vspace{-1.5em}
  \includegraphics[width=200pt]{./figures/Sec_UIC/移动群智感知的空间分布.pdf}
  \vspace{-0.5em}
  \caption{移动群智感知的空间分布}
  \vspace{-0.5em}
  \label{Figure_CoverageofArea}
\end{figure}

\begin{equation}
  \label{Formula_LocationIJ}
  L_{ij}(t) = \left \{
  \begin{aligned}
  & 1,\ \text{mobile node $j$ is in $g(i)$ at time $t$.}\\
  & 0,\ \text{otherwise.}
  \end{aligned}
  \right.
\end{equation}

利用 $L_{ij}(t)$，移动设备 $j$ 在网格 $g(i)$ 中的总停留时间 $C_{ij}$ 可以用式~\eqref{Formula_UserTrace} 表示。

\begin{equation}
  \label{Formula_UserTrace}
  C_{ij}(t) = \int_{0}^{t}L_{ij}(\varepsilon )d\varepsilon , \forall \ i \in [0,m], j \in [0,N]
\end{equation}

因此，在 $t$ 时刻，移动群智感知服务的感知质量 $C(t)$ 可以利用来式~\eqref{Formula_UserCoverageGrip} 来计算。

\begin{equation}
  \label{Formula_UserCoverageGrip}
  \begin{gathered}
  C(t) = \sum^{m}_{i=0}\sum^{N}_{j=0} g_i \times C_{ij}(t), \forall \ t>0
  \end{gathered}
\end{equation}

\subsection{基于感知任务生命周期的优化调度算法}

% 在本节中，我们在最后一节中介绍了一个基于随机过程分析的应用用例。尽管具有D2D通信的MCSwith应该是延迟容忍的，但是一些应用也受到截止时间的限制，因为感测数据和截止时间变得非常宝贵。由于MCS过程有两个阶段，因此研究如何在这两个阶段分配时间以最大限度地提高平均水平具有重要意义。根据上面的分析，假设任务分发阶段持续，即分配给任务分发的时间，我们可以得出deadlineTtotaltimeas接收到的数据包总数
基于上一小节的模型，本节利用随机过程分析的方法对边缘计算下的移动群智感知应用进行理论分析。
由于移动群智感知应用对感知数据的时效性非常敏感，不具备时效性的感知数据可能会导致错误的计算结果。
因此在使用机会式D2D通信交换感知数据时，必须考虑移动群智感知应用的截止时间限制。
前文已经阐述移动群智感知应用中，足够多的参与设备和大量的反馈数据才能保证移动群智感知的时效性。
所以在固定生命周期内，合理分配这两个过程的时间配额才能最大程度的提高移动群智感知应用的感知质量。

通过前文的分析，当任务分发过程的时间配额为 $t$ 时，在周期 $T_{total\_time}$ 中移动群智感知应用可以收集到的感知数据总数 $D(t)$ 可以利用式~\eqref{Formula_DataAmount} 计算。
该式中，实际参与移动群智感知应用的移动设备数量为 $N\times C_T(t)$。
$T_{total\_time}-t$ 是数据收集阶段的时间配额，在该时间段类可以收到的『数据比例为 $C_F(T_{total\_time}-t)$』。

\begin{equation}
  \label{Formula_DataAmount}
  \begin{gathered}
  D(t) = N \cdot C_T(t) \cdot C_F(T_{total\_time}-t),\forall \ t \in [0, T_{total\_time}]
  \end{gathered}
\end{equation}

% 根据等式。( 12 )这一价值对可实现的覆盖范围有着明显的深刻影响。很容易推导出0 ) =和Ttotaltime ) = 0。SinceCT(t)0is在光子递增函数oft中，andCF(Ttotaltimet)0is在单调递减函数oft中，必须存在一个可以最大化( t )的值，表示最高的感知质量，即覆盖范围。为了找出最佳的时间分配，我们通过枚举时间分配，通过数值计算设计了一种算法。算法1描述了算法。
在式~\eqref{Formula_DataAmount} 中，$t$ 是唯一的自变量。
因此，不同阶段的时间配额会直接影响到移动群智感知应用的感知质量。
当 $t=0$ 或 $t=t_{total\_time}$ 时，$D(t)$ 恒为零。
且当 $0 \leq t \leq t_{total\_time}$ 时，$C_T(t)\geq 0$ 且 $C_T(t)$ 为单调递增函数；$C_F(T_{total\_time}-t) \geq 0$ 且 $C_F(T_{total\_time}-t)$ 为单调递减函数。
因此，当$0 \leq t \leq t_{total\_time}$时，$D(t) \geq 0$ 且对于 $t$ 必定存在一个值使得 $D(t)$ 取到最大值，即移动群智感知应用的感知质量达到最优。
为了找到最佳的时间划分，本文设计了一个枚举算法来找出 $t$ 的最优解。
该算法伪代码如算法~\ref{algo_findbestt} 所示。

% \vspace{-0.5em}
% \begin{algorithm}[h]
% \caption{Find out the best allocation $t$ to maximize $D(t)$}
% \footnotesize
% \label{algo_findbestt}
% \textbf{Requires:\\}
% \text{\quad \quad input $[N, N_f, \lambda_n, \lambda_f]$ and the total time $T_{total\_time}$\\}
% \begin{algorithmic}[1]
%   \State \text{let $t = T_{total\_time}/N\_slots$}
%   \State \text{let $t\_list = [t, 2t, 3t, 4t,\ldots,N\_slots \times t]$}
%   \State \text{let $res\_list = [0] \times N\_slots$}
%   \State \text{let $index = 0;\ maximum = 0;\ best\_t = 0$}
%   \For{$item \in t\_list$}
%     \State \text{$res\_list[index] = D(item)$ \quad (Formula~\ref{Formula_DataAmount})}
%     \If {$D(item) > maximum$}
%       \State $maximum = D(item)$
%       \State $best\_t = t\_list(index)$
%     \EndIf
%     \State \text{$index$ ++}
%   \EndFor
%   \State \text{return $maximum, best\_t$}
% \end{algorithmic}
% \end{algorithm}
% \vspace{-0.5em}

\begin{algorithm}[h]
\setstretch{\algostretch}
\KwIn{$N$ : 移动设备的总数量}
\KwIn{$N_f$ : 边缘服务器的数量}
\KwIn{$\lambda_n$: 移动设备之间的相遇率}
\KwIn{$\lambda_f$: 边缘服务器和移动设备之间的相遇率}
\KwIn{$T_{total\_time}$ : 移动群智感知服务的生命周期}
% \KwData{『输入数据』}
% \KwData{$Occ[1:T]$: 每个程序当前的NCP大小，初始为0，随着缓存路的分配增加，最终为每个程序在整个缓存上的NCP}
let $t = T_{total\_time}/N\_slots$\\
let $t\_list = [t, 2t, 3t, 4t,\ldots,N\_slots \times t]$\\
let $res\_list = [0] \times N\_slots$\\
let $index = 0;\ maximum = 0;\ best\_t = 0$\\
\For{$item \in t\_list$}{
  $res\_list[index] = D(item)$ \quad (式~\ref{Formula_DataAmount})\\
  \If {$D(item) > maximum$}{
    $maximum = D(item)$\\
    $best\_t = t\_list(index)$
  }
  $index$ ++
}
% return $maximum, best\_t$\\
\KwOut{$maximum, best\_t$ : $D(t)$ 的最大值，和对应 $t$ 的值}
\caption{找出让 $D(t)$ 最大的时间配额划分 $t$}
\label{algo_findbestt}
\end{algorithm}

% 在算法1中，总时间TotalTimes被分成intoNslotsslots。然后，我们枚举时隙时间时隙，以找到能够最大化( t )的最佳分配。这种算法的时间复杂性是isO ( Nslots )。
在算法~\ref{algo_findbestt} 中，移动群智感知应用的生命周期被切分成 $N\_slots$ 份。
通过对不同的时间配额进行枚举计算，求出让 $D(t)$ 取值最大的时间划分。
该算法的时间复杂度为 $O(N\_slots)$。

\section{实验结果及分析}

% 为了验证我们分析的正确性和准确性，我们在本节中报告了我们基于模拟的结果。 此外，我们的算法在寻找最优时间分配方面的效率得到了证明。
为了验证本章分析方法的可行性，本节将随机过程分析模型的分析结果与 ONE 模拟器~\cite{DBLP:conf/simutools/OK09}对移动群智感知应用的仿真结果进行对比。
然后在仿真实验中，验证了感知应用执行时间划分算法的有效性和效率。
最后，根据随机过程分析模型的分析结果，提出了面向群智感知质量优化的边缘资源调度策略。

\subsection{模拟器设置}
% 我们进行跟踪驱动模拟，以广泛评估我们对雾计算中MCS应用的基于ODE的分析。遵循ONE模拟器[ 24 ]的原理，我们捕获雾环境中的网络行为，并获得参数，如N；国家森林机构；andf. n通过追踪数据包路径和所有移动设备的状态，可以获得有效MCS参与者的数量、雾节点接收到的数据包数量，以及在一定时间内达到的覆盖率。在我们的随机过程分析中，这些信息可以由场景参数sN导出；国家森林机构；andf. n将分析结果和仿真结果进行比较，我们能够验证我们分析的正确性和准确性。为了彻底验证随机过程分析的准确性，我们首先验证我们对每个阶段的分析，然后对整体分析进行比较。
ONE~（Opportunistic Network Environment）模拟器~\footnote{The ONE simulator https://akeranen.github.io/the-one/} 是一个开源的机会式通信网络环境模拟器。
利用该模型器，可以构建具有如下特征的机会式通信网络：
1）移动设备可以单独配置其移动模型或移动轨迹；
2）可以在数据转发过程中部署不同的路由算法；
3）实时记录模拟网络环境中的移动设备运动状态和数据流状态；
4）利用地图信息和真实世界中移动设备的轨迹数据，模拟真实世界中的网络场景。

\begin{table}[h]
  \vspace{-0.5em}
  \caption{ONE模拟器中的场景参数及其定义}
  \vspace{-0.5em}
  \centering
  \label{table_notations_ONE}
  % \centering
  \begin{tabular}{|c|p{7cm}|}
  \hline
  \textbf{场景参数} & \textbf{定义}\\
  \hline
  $N$ & 移动设备的数量\\\hline
  $N_f$ & 基站的数量\\\hline
  $\lambda_n$ & 移动设备之间的相遇概率\\\hline
  $\lambda_f$ & 基站和移动设备的相遇概率\\\hline
  $I(t)$ & $t$ 时刻已经收到任务的移动设备的数量\\\hline
  $I'(t)$ & $t$ 时刻 $I(t)$ 的增量\\\hline
  $P_{rcv}(t)$ & $t$ 时刻基站收到感知数据的概率\\\hline
  \end{tabular}
  \vspace{-1em}
\end{table}

% 在测试过程中，本章使用 ONE 模拟器对边缘计算模型下的移动群智感知应用进行模拟仿真。
在 ONE 模拟器中，可以设置的主要场景参数如表~\ref{table_notations_ONE} 所示。
\textbf{『ONE 模拟器参数解释，并和相遇率的计算挂钩』}

模拟参数设置完成之后，ONE 模拟器会根据自定义的群智感知应用逻辑和数据转发路由算法，模拟移动设备的移动过程、设备之间的通信过程。
仿真完成后，模拟网路中的所有操作会以日志的方式进行保存。
通过对日志文件的分析，可以还原网络中的数据包流向，进而得到群智感知应用执行过程中，感知任务的部署数量、感知数据的收集数量、以及感知数据的覆盖范围。


% 在仿真实验中，主要的输入参数有：$N$、$N_f$、$\lambda_n$、$\lambda_f$，其具体含义如表~\ref{table_notations_ONE} 所示。
% 对仿真过程产生的日志信息进行处理，可以获得参与感知任务的移动设备数量以及每个数据包所经过的具体路径。
% 结合模拟器中移动设备的运动轨迹以及日志的时间戳进一步分析，还可以获得边缘服务器在任意时刻收到的感知数据数量以及已收集的感知数据所覆盖的地域范围。

利用本文中的随机过程分析模型，可以利用参数 $N$、$N_f$、$\lambda_n$和$\lambda_f$推导出同样的信息。
将模拟仿真和随机过程分析得到的结果进行对比，可以验证本文中模型的正确性。
在对比过程中，先分别验证任务分发过程和数据收集过程的覆盖率，再针对移动群智感知全过程，验证其范围覆盖和感知质量。

% 我们首先通过使用不同的参数asN来验证我们对任务传播阶段的分析；国家森林机构；andf,which n定义在表一中。结果在图6中报告，包括模拟结果和通过求解等式获得的分析结果。( 4 )。从这个图中，可以观察到我们获得了高精度，因为分析结果都非常接近于模拟结果。在5000组实验中，在任务传播阶段，平均误差为5.7 %。我们还注意到，有效的MCS参与者( EMP )的数量随着时间的增加而增加。最初，增长率低的原因是雾节点，很少有“受感染”的移动设备能够使其他“易受感染”的移动设备生效。后来，有效的MCS参与者的数量急剧增加，因为已经有很多有效的MCS参与者。然而，这种增长最终会收敛，因为大多数移动电话已经被“感染”。这种现象符合我们的常识。

\subsection{随机过程分析模型精确度测试}

\begin{figure}[!h]
  \centering
  % \vspace{-2em}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Propagation/F3-1.pdf}}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Propagation/F3-2.pdf}}\\
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Propagation/F3-3.pdf}}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Propagation/F3-4.pdf}}
  \vspace{-0.5em}
  \caption{任务分发过程中分析结果和模拟结果对比}
  \vspace{-0.5em}
  \label{Figure_PropagationTest}
\end{figure}

\begin{figure}[!h]
  \centering
  % \vspace{-0.5em}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Collection/R1-0.pdf}}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Collection/R1-1.pdf}}\\
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Collection/R1-2.pdf}}
  {\includegraphics[width=200pt]{./figures/Sec_UIC/Collection/R1-3.pdf}}
  \vspace{-0.5em}
  \caption{数据收集过程中分析结果和模拟结果对比}
  \vspace{-2em}
  \label{Figure_CollectionTest}
\end{figure}

首先通过使用不同的参数 $N, N_f, \lambda_n$, 和 $\lambda_f$ 来验证本文对任务分发过程的分析。
图~\ref{Figure_PropagationTest} 反应了不同参数取值对移动群智感知效率的影响。
图中横坐标为时间轴，纵坐标为移动群智感知应用收到的感知数据的数量，其结果可通过式~\eqref{Formula_Coverage_of_Task} 计算得到。
通过曲线对比仿真结果和模拟结果，两者的趋势是非常接近的。
在5000组不同参数的实验对比中，任务分发数量的平均误差为 5.7\%。
对图像进行观察可以发现，移动群智感知应用执行初期，感知服务部署速度偏低，这是因为任务只能通过边缘服务器分发。
在获得任务的移动设备增多之后，区域内的任务分发源也越来越多，因此能够执行感知任务的移动设备数量呈指数级上涨。
当任务覆盖率接近饱和时，感知服务部署速度逐渐降低，获得任务的移动设备数量逐步趋近于目标区域内的移动设备总数。

% 同样的方法被用来验证我们对数据收集阶段的分析的准确性。首先，我们假设每个EMP都有一个包，由发送到雾节点的所有传感数据组成。这一过程类似于传统的流行病传播途径。然而，有多个雾节点作为目的节点，在传统流行病路由中只有一个目的节点。我们认为，一旦任何fog节点接收到数据包，该数据包就会被成功传递。我们计算在时间t接收到的数据包数量。性能评估结果如图7所示，其中分析结果通过求解等式获得。( 5 )。我们再次注意到，我们对数据收集的分析也非常准确，因为结果都接近分析结果。在5000组随机种子的模拟中，平均误差为9.6 %。与我们的一般情况一致，接收到的数据包数量随着时间的推移而增加。首先，接收的数据包数量缓慢增加，然后快速增加，最后收敛。



然后，用同样的方法来验证本文对数据收集过程的分析。
假设每个获得感知任务的移动设备收集一份感知数据，用一个网络包将结果反馈给边缘服务器。
由于在目标区域内，部署有多个边缘服务器。
当数据包抵达任何一个边缘服务器时，都可以认为数据反馈成功。
利用式~\eqref{Formula_ProbaRcvT}，可以计算被成功接收的数据包数量。
图~\ref{Figure_CollectionTest} 展示了模拟试验和理论分析的对比结果。
图中，两者的变化趋势依然保持一致。
在5000组不同参数的实验对比中，数据收集理论分析的平均误差为 9.6\%。
且变化趋势和实际情况相符。

% 在对我们的雾计算中的两个主要阶段进行验证后，我们用D2D通信授权MCS，接下来我们考虑两个阶段，并调查我们的总体随机过程分析是如何进行的。在本实验中，我们设置总时隙数Ttotaltimeas 100s，并在不同的网络设置中从0到100改变时间分配。结果报告在图8中，其中通过求解等式获得分析结果。( 12 )。直观地说，在任何oft值下，分析结果总是接近模拟结果。这表明我们对这两个阶段的总体分析也是准确的。此外，在图8中观察到的一个有趣现象是，接收到的分组数量首先随着时间分配的分配增加而增加，然后随着达到最大值而减少。最初，随着分配给任务分发阶段的时间越来越多，越来越多的移动设备可以有效地参与MCS过程。因此，接收到的数据包数量会增加。达到最大值后，进一步增加将减少分配给数据收集阶段的时间。虽然MCS参与者更有效，但是在截止日期之前，传感数据几乎没有时间被传送到雾节点。因此，性能甚至会下降。这意味着存在一个最佳时间分配，可以最大限度地提高感知质量，找到这样一个最佳设置非常重要。幸运的是，我们提出的算法1能够处理这个问题

\begin{figure}[!b]
  \centering
  % \vspace{-1.5em}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/RcvsSim/0.pdf}}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/RcvsSim/1.pdf}}\\
  {\includegraphics[width=210pt]{./figures/Sec_UIC/RcvsSim/2.pdf}}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/RcvsSim/3.pdf}}
  \vspace{-1em}
  \caption{不同时间配额下的分析结果和模拟结果}
  % \vspace{-2em}
  \label{Figure_EntireTest}
\end{figure}

最后，对边缘计算下的移动群智感知应用全过程进行分析验证。
结合任务分发和数据收集两个重要阶段，验证本文中时间划分的合理性。
在本次实验中，移动群智感知应用的生命周期$T_{total\_time}$被设置为100秒。
针对场景定义参数$N, N_f, \lambda_n$, and $\lambda_f$设计了四种不同的场景，分析移动群智感知应用可以收到的数据量和时间的关系。
测试结果如图~\ref{Figure_EntireTest} 所示，理论测试值通过式~\eqref{Formula_DataAmount} 计算得出。
图示结果直观的反映出本文的理论分析犯法和模拟实验结果非常吻合，在任何时间分配方案下，分析结果总是接近模拟结果。
这也验证了本文对任务分发和数据收集两个阶段的分析也是准确无误的。
此外，在图中还能观察到的一个有趣现象：接收到的感知数据总量首先随着任务分发的时间配额的增加而增加，然后随着达到最大值而减少。
最初，随着分配给任务分发阶段的时间越来越多，越来越多的移动设备可以有效地参与MCS过程。
因此，接收到的数据包数量会增加。
达到最大值后，进一步的增加将减少分配给数据收集阶段的时间配额。
而在固定的声明周期内，不仅需要任务顺利发送到移动设备，也需要感知数据能准确的传送回边缘服务器。
因此，当数据收集时间减少时，移动群智感知应用的感知质量会随之下降。
这意味着存在一个最佳时间分配，可以最大限度地提高感知质量，找到这样一个最佳设置非常重要。
幸运的是，我们提出的算法1能够处理这个问题。

\begin{figure}[!b]
  \centering
  % \vspace{-1em}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/BestT/0.pdf}}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/BestT/1.pdf}}\\
  {\includegraphics[width=210pt]{./figures/Sec_UIC/BestT/2.pdf}}
  {\includegraphics[width=210pt]{./figures/Sec_UIC/BestT/3.pdf}}
  \vspace{-1em}
  \caption{不同时间划分的对感知质量的影响}
  % \vspace{-1em}
  \label{Figure_BestT}
\end{figure}

为了验证时间配额划分算法的准确性，测试中使用参数 $N=6000, N_f=4, \lambda_n = 0.000027, \lambda_f=0.00018$ 定义的模拟场景。
移动群智感知应用的生命周期 $T_{total\_time}$ 设置为 100 秒。
任务分发和数据收集的最佳时间分配，接收到的数据包数量应该是最大的。
假设每个移动群智感知参与者需要必须返回一个数据包，则应该收集的数据包总数和群智感应参与者的数量应当相同，即为 $N$。
因此可以使用被收集的数据包总数与移动群智感知参与者数量的比例来表示移动群智感知应用的效率。
图~\ref{Figure_BestT} 展示了任务分发过程的时间配额分别为25秒、50秒、75秒以及58.6秒时的移动群智感知应用执行效率。
其中，58.6秒是利用时间配额划分算法找出的最佳任务分发时间配额。
对比实验结果可以看出，最佳分配的结果比其他分配方法导致的执行效率要高出20\%以上。
在算法实验中，$N\_slots$ 被设置为 $10^7$，算法执行时间不超过 2500 毫秒。



\subsection{服务部署对感知质量的影响}

% 在每组实验中改变一个设置，并显示最终接收到的数据包数量。不同valuesofN,Nf,nandfare的比较都在图10中报道。我们注意到，可实现的传感质量显示为任一参数的递增函数，正如模拟结果和分析结果所表明的，它们总是彼此接近。这进一步广泛地验证了我们分析的正确性和准确性，因为它在任何设置下都能接近模拟结果。在每组测试中，只有一个场景参数作为变量。移动设备的数量N、相遇概率λ n和相遇概率λ f每一步增加10 %的基数。雾节点的数量每增加一步就增加一倍。通过比较，可以发现MCS应用中影响因素的优先级排序(降序)如下: N、λ n、N f和λ f。

\begin{figure}[!b]
  \centering
	% \vspace{-1.5em}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/SingleVar/1n.pdf}}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/SingleVar/1ln.pdf}}\\
	{\includegraphics[width=210pt]{./figures/Sec_UIC/SingleVar/1nf.pdf}}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/SingleVar/1lf.pdf}}
	\vspace{-1em}
	\caption{各参数对感知质量的影响}
	% \vspace{-1.5em}
	\label{Figure_SingleValTest}
\end{figure}

该测试将时间配额划分算法应用到不同的网络场景下，获得在移动群智感知应用的生命周期内可以接受到的数据包总量。
其中，基准移动群智感知的网络环境定义为 $N=5000, N_f=2, \lambda_n = 0.00003, \lambda_f=0.0004$。
在每组实验中，四个环境变量值只改变其中一个，剩余三个环境变量保持不见。
以此可观察出一种环境变量的变化对移动群智感知应用的感知质量的影响。
也从侧面反映出边缘计算对移动群智感知应用的影响。
测试结果如图~\ref{Figure_SingleValTest} 所示。
通过仿真数据和理论数据的对比，验证了本文中模型的准确性。
同时，测试结果也展示了不同类型的边缘网络环境变量对移动群智感知应用的感知质量的影响效果。
测试中，边缘服务器的数量 $N_f$ 以倍数关系增长，移动设备的数量$N$、相遇率 $\lambda_n$ 和 $\lambda_f$ 均以 10\% 等比例增长。
对比发现，在边缘计算支撑下的移动群智感知应用中，移动设备的数量$N$对感知效率的影响最大，其次是移动设备的相遇率 $\lambda_n$，然后是边缘服务器的数量 $N_f$，最后是边缘服务器和移动设备的相遇率 $\lambda_f$。

\begin{figure}[!h]
  \centering
	% \vspace{-1.5em}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/args/1n.pdf}}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/args/1ln.pdf}}\\
	{\includegraphics[width=210pt]{./figures/Sec_UIC/args/1nf.pdf}}
	{\includegraphics[width=210pt]{./figures/Sec_UIC/args/1lf.pdf}}
	\vspace{-1em}
	\caption{各参数对感知质量的收益比例}
	% \vspace{-1.5em}
	\label{Figure_SingleVal}
\end{figure}

% 图~\ref{Figure_SingleVal}

\section{本章总结}

本章研究了边缘计算支撑下的典型移动群智感知应用，利用边缘服务进行感知任务传播和感知数据收集。
同时，采用 D2D 通信构建机会式通信网络来加速任务分发和感知数据收集。
借助随机过程分析方法，针对感知应用的执行过程建立模型，通过常微分方程组来描述群智感知的执行过程。
通过求解方程组，找到了边缘服务数量、移动设备数量、移动设备运动状态、群智感知应用覆盖率以及感知数据收集率的关系。
通过任务传播过程和数据收集过程的量化分析，在感知应用生命周期定的情况下，研究了感知质量影响因素优先级和改进方法，并提出任务分发和数据收集两个过程的时间划分方法。
最大限度地提高移动群智感知应用的感知质量。
并通过模拟实验，验证了模型的正确性和优化机制的有效性。
